
<!DOCTYPE html>
<html>
<head><meta charset="utf-8"><title>TimeSeriesCVDiagram</title></head>
<body>
<div id="root"><div style="font-family:Arial, sans-serif;padding:20px;max-width:100%"><div style="margin-bottom:20px"><h2>Time Series Cross-Validation Approach</h2><p>The project uses a rolling window approach to handle the time-dependent nature of financial data</p></div><div style="display:flex;gap:20px;margin-bottom:20px"><div style="display:flex;align-items:center;font-size:14px"><div style="width:20px;height:20px;margin-right:8px;border-radius:4px;background-color:#4a90e2"></div><span>Training Period</span></div><div style="display:flex;align-items:center;font-size:14px"><div style="width:20px;height:20px;margin-right:8px;border-radius:4px;background-color:#e2984a"></div><span>Testing Period</span></div><div style="display:flex;align-items:center;font-size:14px"><div style="width:20px;height:20px;margin-right:8px;border-radius:4px;background-color:#ddd"></div><span>Unused Data</span></div></div><div style="border:1px solid #ddd;border-radius:8px;padding:20px;margin-bottom:30px;background-color:#fafafa"><h3>Rolling Window Cross-Validation</h3><div style="display:flex;flex-direction:column;gap:15px;margin-top:20px"><div style="display:flex;align-items:center;height:40px"><div style="width:100px;text-align:right;padding-right:10px;font-size:12px;font-weight:bold">Fold 1</div><div style="display:flex;width:100%;position:relative"><div style="width:12.5%"><div style="height:100%;background-color:#4a90e2;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:12px;font-weight:bold;width:12.5%">Train</div></div><div style="width:12.5%"><div style="height:100%;background-color:#4a90e2;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:12px;font-weight:bold;width:12.5%">Train</div></div><div style="width:12.5%"><div style="height:100%;background-color:#e2984a;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:12px;font-weight:bold;width:12.5%">Test</div></div><div style="width:12.5%"><div style="height:100%;background-color:#ddd;opacity:0.5;border-radius:4px;width:12.5%"></div></div><div style="width:12.5%"><div style="height:100%;background-color:#ddd;opacity:0.5;border-radius:4px;width:12.5%"></div></div><div style="width:12.5%"><div style="height:100%;background-color:#ddd;opacity:0.5;border-radius:4px;width:12.5%"></div></div><div style="width:12.5%"><div style="height:100%;background-color:#ddd;opacity:0.5;border-radius:4px;width:12.5%"></div></div><div style="width:12.5%"><div style="height:100%;background-color:#ddd;opacity:0.5;border-radius:4px;width:12.5%"></div></div></div></div><div style="display:flex;align-items:center;height:40px"><div style="width:100px;text-align:right;padding-right:10px;font-size:12px;font-weight:bold">Fold 2</div><div style="display:flex;width:100%;position:relative"><div style="width:12.5%"><div style="height:100%;background-color:#ddd;opacity:0.5;border-radius:4px;width:12.5%"></div></div><div style="width:12.5%"><div style="height:100%;background-color:#4a90e2;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:12px;font-weight:bold;width:12.5%">Train</div></div><div style="width:12.5%"><div style="height:100%;background-color:#4a90e2;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:12px;font-weight:bold;width:12.5%">Train</div></div><div style="width:12.5%"><div style="height:100%;background-color:#e2984a;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:12px;font-weight:bold;width:12.5%">Test</div></div><div style="width:12.5%"><div style="height:100%;background-color:#ddd;opacity:0.5;border-radius:4px;width:12.5%"></div></div><div style="width:12.5%"><div style="height:100%;background-color:#ddd;opacity:0.5;border-radius:4px;width:12.5%"></div></div><div style="width:12.5%"><div style="height:100%;background-color:#ddd;opacity:0.5;border-radius:4px;width:12.5%"></div></div><div style="width:12.5%"><div style="height:100%;background-color:#ddd;opacity:0.5;border-radius:4px;width:12.5%"></div></div></div></div><div style="display:flex;align-items:center;height:40px"><div style="width:100px;text-align:right;padding-right:10px;font-size:12px;font-weight:bold">Fold 3</div><div style="display:flex;width:100%;position:relative"><div style="width:12.5%"><div style="height:100%;background-color:#ddd;opacity:0.5;border-radius:4px;width:12.5%"></div></div><div style="width:12.5%"><div style="height:100%;background-color:#ddd;opacity:0.5;border-radius:4px;width:12.5%"></div></div><div style="width:12.5%"><div style="height:100%;background-color:#4a90e2;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:12px;font-weight:bold;width:12.5%">Train</div></div><div style="width:12.5%"><div style="height:100%;background-color:#4a90e2;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:12px;font-weight:bold;width:12.5%">Train</div></div><div style="width:12.5%"><div style="height:100%;background-color:#e2984a;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:12px;font-weight:bold;width:12.5%">Test</div></div><div style="width:12.5%"><div style="height:100%;background-color:#ddd;opacity:0.5;border-radius:4px;width:12.5%"></div></div><div style="width:12.5%"><div style="height:100%;background-color:#ddd;opacity:0.5;border-radius:4px;width:12.5%"></div></div><div style="width:12.5%"><div style="height:100%;background-color:#ddd;opacity:0.5;border-radius:4px;width:12.5%"></div></div></div></div><div style="display:flex;align-items:center;height:40px"><div style="width:100px;text-align:right;padding-right:10px;font-size:12px;font-weight:bold">Fold 4</div><div style="display:flex;width:100%;position:relative"><div style="width:12.5%"><div style="height:100%;background-color:#ddd;opacity:0.5;border-radius:4px;width:12.5%"></div></div><div style="width:12.5%"><div style="height:100%;background-color:#ddd;opacity:0.5;border-radius:4px;width:12.5%"></div></div><div style="width:12.5%"><div style="height:100%;background-color:#ddd;opacity:0.5;border-radius:4px;width:12.5%"></div></div><div style="width:12.5%"><div style="height:100%;background-color:#4a90e2;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:12px;font-weight:bold;width:12.5%">Train</div></div><div style="width:12.5%"><div style="height:100%;background-color:#4a90e2;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:12px;font-weight:bold;width:12.5%">Train</div></div><div style="width:12.5%"><div style="height:100%;background-color:#e2984a;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:12px;font-weight:bold;width:12.5%">Test</div></div><div style="width:12.5%"><div style="height:100%;background-color:#ddd;opacity:0.5;border-radius:4px;width:12.5%"></div></div><div style="width:12.5%"><div style="height:100%;background-color:#ddd;opacity:0.5;border-radius:4px;width:12.5%"></div></div></div></div><div style="display:flex;align-items:center;height:40px"><div style="width:100px;text-align:right;padding-right:10px;font-size:12px;font-weight:bold">Fold 5</div><div style="display:flex;width:100%;position:relative"><div style="width:12.5%"><div style="height:100%;background-color:#ddd;opacity:0.5;border-radius:4px;width:12.5%"></div></div><div style="width:12.5%"><div style="height:100%;background-color:#ddd;opacity:0.5;border-radius:4px;width:12.5%"></div></div><div style="width:12.5%"><div style="height:100%;background-color:#ddd;opacity:0.5;border-radius:4px;width:12.5%"></div></div><div style="width:12.5%"><div style="height:100%;background-color:#ddd;opacity:0.5;border-radius:4px;width:12.5%"></div></div><div style="width:12.5%"><div style="height:100%;background-color:#4a90e2;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:12px;font-weight:bold;width:12.5%">Train</div></div><div style="width:12.5%"><div style="height:100%;background-color:#4a90e2;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:12px;font-weight:bold;width:12.5%">Train</div></div><div style="width:12.5%"><div style="height:100%;background-color:#e2984a;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:12px;font-weight:bold;width:12.5%">Test</div></div><div style="width:12.5%"><div style="height:100%;background-color:#ddd;opacity:0.5;border-radius:4px;width:12.5%"></div></div></div></div><div style="display:flex;align-items:center;height:40px"><div style="width:100px;text-align:right;padding-right:10px;font-size:12px;font-weight:bold">Fold 6</div><div style="display:flex;width:100%;position:relative"><div style="width:12.5%"><div style="height:100%;background-color:#ddd;opacity:0.5;border-radius:4px;width:12.5%"></div></div><div style="width:12.5%"><div style="height:100%;background-color:#ddd;opacity:0.5;border-radius:4px;width:12.5%"></div></div><div style="width:12.5%"><div style="height:100%;background-color:#ddd;opacity:0.5;border-radius:4px;width:12.5%"></div></div><div style="width:12.5%"><div style="height:100%;background-color:#ddd;opacity:0.5;border-radius:4px;width:12.5%"></div></div><div style="width:12.5%"><div style="height:100%;background-color:#ddd;opacity:0.5;border-radius:4px;width:12.5%"></div></div><div style="width:12.5%"><div style="height:100%;background-color:#4a90e2;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:12px;font-weight:bold;width:12.5%">Train</div></div><div style="width:12.5%"><div style="height:100%;background-color:#4a90e2;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:12px;font-weight:bold;width:12.5%">Train</div></div><div style="width:12.5%"><div style="height:100%;background-color:#e2984a;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:12px;font-weight:bold;width:12.5%">Test</div></div></div></div><div style="display:flex;align-items:center;height:40px"><div style="width:100px;text-align:right;padding-right:10px;font-size:12px;font-weight:bold"></div><div style="display:flex;width:100%;position:relative"><div style="width:12.5%;text-align:center;font-size:11px">2023-07-03</div><div style="width:12.5%;text-align:center;font-size:11px">2023-07-10</div><div style="width:12.5%;text-align:center;font-size:11px">2023-07-17</div><div style="width:12.5%;text-align:center;font-size:11px">2023-07-24</div><div style="width:12.5%;text-align:center;font-size:11px">2023-07-31</div><div style="width:12.5%;text-align:center;font-size:11px">2023-08-07</div><div style="width:12.5%;text-align:center;font-size:11px">2023-08-14</div><div style="width:12.5%;text-align:center;font-size:11px">2023-08-21</div></div></div></div><div style="font-size:14px;line-height:1.5;margin-top:20px;padding:15px;background-color:#f5f5f5;border-radius:5px;border:1px solid #eee"><p><strong>Implementation Details:</strong></p><ul><li>Each fold uses a fixed window size of 2 days for training (optimal as found in hyperparameter optimization)</li><li>Test window is 1 day immediately following the training period</li><li>Windows &quot;roll forward&quot; in time for each fold</li><li>This approach respects the temporal nature of financial data - prevents future information leakage</li><li>Hyperparameter tuning uses early data, final evaluation uses later data (validation set)</li><li>Models are evaluated on ability to generalize to future, unseen data</li></ul><p>The code implements this approach using the function <code>_create_time_series_splits</code> which generates train/test splits with proper date separation:</p><pre>def _create_time_series_splits(self, train_size, dates):
    splits = []
    n = len(dates)

    for i in range(n):
        if i + train_size &lt; n:
            train_dates = dates[i:i + train_size]
            test_dates = [dates[i + train_size]]
            splits.append((train_dates, test_dates))

    return splits</pre></div></div></div></div>
</body>
</html>